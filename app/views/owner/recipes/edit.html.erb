<div class="container">
  <div class="recipe-header">
    <center style="margin: 25px auto;">
      <h2><%= @recipe.title.capitalize %></h2>
      <h4 style="opacity: 0.5;">Page d'édition <i class="far fa-edit"></i></h4>
    </center>
    <% if @recipe.kind == 'changes_proposal' %>
      <div class="contribution-warning">
        <h6><i class="far fa-lightbulb"></i> Vous êtes en mode 'contribution'.</h6>
        Les changements que vous allez effectuer ici seront proposés à <%= @recipe.original_recipe.user.first_name.capitalize %>. Il/elle pourra s'il/elle le souhaite les intégrer dans la recette originale.
      </div>
    <% end %>
  </div>
  <!-------------------------------- EDIT RECIPE FORM 1 -------------------------------->

  <% if @recipe.kind == 'variant' %>
     <%= simple_form_for([:owner, @recipe], remote: true) do |recipe_form|%>
      <div class="form-subtitle">
        Nom de votre variante
        <%= recipe_form.input :subtitle, label: false, placeholder: '...' %>
        <%= recipe_form.button :submit, 'Mettre à jour', class: 'btn btn-info js-update-btn' %>
      </div>
    <% end %>
  <% end %>
  <!------------------------------- END OF RECIPE FORM 1 ------------------------------->
  <div class="container">
    <div class="form-photo-wrapper">
      <%= simple_form_for([:owner, @recipe], remote: true) do |recipe_form|%>
        <div class="form-photo">
          <p>Photo</p>
          <%= recipe_form.input :photo, label: false %>
        </div>
      <% end %>
    </div>
  </div>
  <!------------------------------- EDIT RECIPE FORM 2 ------------------------------->
  <div class="form-servings-wrapper">
    <%= simple_form_for([:owner, @recipe], remote: true) do |recipe_form|%>
      <div class="form-servings">
        <p>Portions</p>
        <div>
          <%= recipe_form.input :servings, label: false, placeholder: '4' %>
        </div>
        <div>
          <%= recipe_form.button :submit, 'Mettre à jour', class: 'btn btn-info js-update-btn' %>
        </div>
      </div>
    <% end %>
  </div>
  <!-------------------------------- END OF RECIPE FORM 2 -------------------------------->
  <div class="form-description-wrapper">
    <%= simple_form_for([:owner, @recipe], remote: true) do |recipe_form|%>
      <div class="form-description">
        <div>
          <%= recipe_form.input :description, label: 'Description', placeholder: "Ecrivez un commentaire sur votre recette" %>
        </div>
        <div>
          <%= recipe_form.button :submit, 'Mettre à jour', class: 'btn btn-info js-update-btn' %>
        </div>
      </div>
    <% end %>
  </div>
  <div class="edit-recipe-division">
    <!------------------------------- EDIT RECIPE FORM 3 ------------------------------->
    <%= simple_form_for([:owner, @recipe], remote: true) do |recipe_form|%>
      <div class="form-inputs">
        <div class="form-timing">
          <%= recipe_form.input :prep_time, label: 'Préparation (h,min)', error: 'Le temps de préparation est obligatoire' %>
          <%= recipe_form.input :cook_time, label: 'Cuisson (h,min)' %>
          <%= recipe_form.input :rest_time, label: 'Repos (h,min)' %>
          <%= recipe_form.button :submit, 'Mettre à jour', class: 'btn btn-info btn-timing js-update-btn' %>
        </div>
      </div>
    <% end %>

  </div>
  <!-------------------------------- END OF RECIPE FORM 3 -------------------------------->
  <div id="step-edit">
    <% @recipe.steps.order(:position).each do |step| %>
      <%= render 'owner/steps/edit', step: step %>
    <% end %>
  </div>
  <!----------------------------------- NEW STEP FORM ----------------------------------->
  <%= simple_form_for([:owner, @recipe, @step], remote: true, url: owner_recipe_steps_path(@recipe)) do |f| %>
    <h5><%= f.submit "+ Ajouter une étape", class: "btn btn-secondary btn-block mb-5 js-add-btn" %></h5>
  <% end %>
  <!------------------------------- END OF NEW STEP FORM ------------------------------->
  <% if @recipe.kind == 'changes_proposal' %>
    <div class="edit-actions">
      <%= simple_form_for [:owner, @recipe, @contribution], url: owner_recipe_contributions_path(@recipe), method: :post do |f| %>
        <%= f.input :message, label: "Expliquer vos changements à #{@recipe.original_recipe.user.first_name.capitalize}" %>
        <%= button_tag type: 'submit', class: 'link-to-new-changes-proposal' do %>
          <i class="far fa-paper-plane"></i> Soumettre mes changements</h5>
        <% end %>
      <% end %>
    </div>
  <% end %>
  <div class="text-right edit-ending-button">
    <%= link_to 'Terminer et revenir au dashboard', owner_dashboard_path, class: "btn btn-info" %>
  </div>
</div>




